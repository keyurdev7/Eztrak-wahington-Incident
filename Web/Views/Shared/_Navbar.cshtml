@using System.Security.Claims
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{

    var supplierClaim = (User as ClaimsPrincipal).FindFirst("SupplierId");
    var loggedInSupplierId = supplierClaim != null ? supplierClaim.Value : "";
}
<style>
    .dropdown-menu {
        margin-top: 15px !important;
        min-width: 160px !important;
    }

    .number-dot {
        position: absolute;
        left: -9px;
        top: -17px;
        height: 18px;
        min-width: 18px;
        border-radius: 15px;
        background-color: #ff9224;
        font-size: 12px;
        color: #fff;
        line-height: 16px;
        text-align: center;
    }

    /* Custom styles for the mega menu */
    .nav-settting .mega-menu {
        max-width: 75%;
        margin-left: 20%;
    }

        .nav-settting .mega-menu .list-group-item {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        .nav-settting .mega-menu .font-weight-bold {
            font-weight: bold;
        }

    .profile .SidebarIcon i {
            color:#f54e00 !important;
        }
        

    .profile{
        padding: 0 14px;
        border: none !important;
    }
</style>
<div class="sidebar">
    <div class="inner">
        <div class="logo">
            <a href="/Home">
                <img src="~/img/eztrak-logo-dark.png" class="full">
                <img src="~/img/logo-min.png" class="min">
            </a>
        </div>
        @{
            var currentController = ViewContext.RouteData.Values["controller"]?.ToString().ToLower();
            var currentAction = ViewContext.RouteData.Values["action"]?.ToString().ToLower();
            var currentPath = HttpContextAccessor.HttpContext.Request.Path.ToString().ToLower(); // Retrieves the current
        }
        @if (User.Identity.IsAuthenticated)
        {
            <div class="navigation">
                <ul class="nav-ul Ezsidebar">
                    <li>
                        <a href="/Home/Dashboard" class="@(currentPath.Contains("/home/dashboard") ? "active" : "")">
                            <span class="SidebarIcon dashboard"><i class="fa-regular fa-home"></i></span>
                            <span class="name">Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Incidents" class="@(currentPath.Contains("/incidents") ? "active" : "")">
                            <span class="SidebarIcon incident"><i class="fas fa-border-all"></i></span>
                            <span class="name">Incidents</span>
                        </a>
                    </li>
                   @*  <li>
                        <a href="/Validation" class="@(currentPath.Contains("/validation") ? "active" : "")">
                            <span class="SidebarIcon incident"><i class="fa-regular fa-circle-check"></i></span>
                            <span class="name">Validation</span>
                        </a>
                    </li> *@
                    <li>
                        
                        <a href="/Settings">
                            <span class="SidebarIcon setting"><i class="fas fa-cog "></i></span>
                            <span class="name">Settings</span>
                        </a>
                    </li>
                  
                    <li>
                        <a href="#" class="text-decoration-none profile dropdown-toggle pl-3 sidebar-account" id="dropdownUser2" data-bs-toggle="dropdown" aria-expanded="false">
                            <span class="SidebarIcon">
                                <i class="fa fa-user"></i>
                            </span>
                            <span class="name">Profile</span>
                          @*   <div class="d-flex flex-column">
                                <span class="ml-1 user-name menu-text">Account</span>
                                <span class="ml-1 user-name menu-text"><small>Admin</small></span>
                            </div> *@
                        </a>
                        <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser3" style="background-color: white;">
                            <li class="dropdown-item">
                                <a class="nav-link d-flex align-items-center" href="/Identity/Account/Manage/ChangePassword">
                                    <i class="fa fa-lock"></i>
                                    <span class="menu-text">Change Password</span>
                                </a>
                            </li>

                            <li class="dropdown-item">
                                <a class="nav-link d-flex align-items-center" href="/Identity/Account/Logout">
                                    <i class="fa fa-user"></i>
                                    <span class="menu-text">Log Out</span>
                                </a>
                            </li>
                        </ul>
                    </li> 
                    
                    @* <li>
                        <a href="/WorkOrders" class="@(currentPath.Contains("/workorders") ? "active" : "")">
                            <img src="~/img/icons/work-order.svg">
                            <span class="name">Work Orders</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Assets" class="@(currentPath.Contains("/assets") ? "active" : "")">
                            <img src="~/img/icons/assets.svg">
                            <span class="name">Assets</span>
                        </a>
                    </li>
                    <li>
                        <a href="/Inventories" class="@(currentPath.Contains("/inventories") ? "active" : "")">
                            <img src="~/img/icons/inventory.svg">
                            <span class="name">Inventory</span>
                        </a>
                    </li> *@
                    @*  <li>
                <a href="/Requests" class="@(currentPath.Contains("/requests") ? "active" : "")">
                <img src="~/img/icons/work-order.svg">
                <span class="name">Requests</span>
                </a>
                </li> *@
                    @* <li>
                        @{
                           
                            var activeClass = currentPath.Contains("/report") ? "active" : "";
                        }
                        <a href="/Reports/Index" class="@activeClass">
                            <img src="~/img/icons/reports.svg">
                            <span class="name">Reports</span>
                           
                        </a> *@
                        @*  <div class="collapse" id="report-collapse" style="">
                    <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                    <li><a class="dropdown-item" attr-parent="reports-dropdown" href="/Report/Maintenance"
                    title="Maintenance Report">
                    <i class="fa fa-wrench"></i>
                    <span>Maintenance</span></a>
                    </li>
                    <li><a class="dropdown-item  nav-dropdown-item" attr-parent="reports-dropdown"
                    href="/Report/Replacement" title="Replacement Report">
                    <i class="fa fa-exchange-alt"></i>
                    <span>Replacement</span>
                    </a></li>
                    <li><a class="dropdown-item  nav-dropdown-item" attr-parent="reports-dropdown"
                    href="/Report/TimeSheet" title="TimeSheet">
                    <i class="fa fa-clock"></i>
                    <span>TimeSheet</span>
                    </a></li>
                    <li><a class="dropdown-item  nav-dropdown-item" attr-parent="reports-dropdown"
                    href="/Report/Transaction" title="Transactions">
                    <i class="fa fa-exchange-alt"></i>
                    <span>WHSE Transactions</span>
                    </a></li>
                    </ul>
                    </div> *@
                    @* </li> *@
                    @* <li>
                @{
                activeClass = currentPath.Contains("/settings") ? "active" : "";
                }
                <a href="" data-bs-toggle="collapse" data-bs-target="#setting-collapse" aria-expanded="false" class="@activeClass btn btn-toggle">
                <img src="~/img/icons/settings.svg">
                <span class="name">Settings</span>
                </a>
                <div class="collapse" id="setting-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li class="">
                <a href="" data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#account-collapse" class="dropdown-toggle">Accounts</a>
                </li>
                <div class="collapse inner-collapse" id="account-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li>
                <a href="/User" class="list-group-item list-group-item-action">User Accounts</a>
                </li>
                </ul>
                </div>

                <li class="">
                <a href="" data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#general-collapse" class="dropdown-toggle">General</a>
                </li>
                <div class="collapse inner-collapse" id="general-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">

                <li>
                <a href="/MUTCD/Index" class="list-group-item list-group-item-action">MUTCDs</a>

                </li>
                <li>
                <a href="#" class="list-group-item list-group-item-action">Geo-Json</a>

                </li>
                </ul>
                </div>

                <li class="">
                <a href="" data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#assets-collapse" class="dropdown-toggle">Assets</a>
                </li>
                <div class="collapse inner-collapse" id="assets-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li>
                <a href="/AssetCustomFields/Index" class="list-group-item list-group-item-action">Custom fields</a>

                </li>
                </ul>
                </div>
                <li class="">
                <a href="" data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#wo-collapse" class="dropdown-toggle">Work Orders</a>
                </li>
                <div class="collapse inner-collapse" id="wo-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li>
                <a href="/CraftSkill/Index" class="list-group-item list-group-item-action">Craft</a>
                </li>
                <li>
                <a href="/WorkOrderCustomFields/Index" class="list-group-item list-group-item-action">Custom fields</a>

                </li>
                <li>
                <a href="/TaskType/Index" class="list-group-item list-group-item-action">Work Steps</a>
                </li>
                </ul>
                </div>

                <li class="">
                <a href="" data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#inventory-collapse" class="dropdown-toggle">Inventory</a>
                </li>
                <div class="collapse inner-collapse" id="inventory-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li>
                <a href="/Category/Index" class="list-group-item list-group-item-action">Category</a>
                </li>
                <li>
                <a href="/Location/Index" class="list-group-item list-group-item-action">Location</a>
                <li>
                <a href="/Manufacturer/Index" class="list-group-item list-group-item-action">Manufacturers</a>
                </li>
                <li>
                <a href="/Source/Index" class="list-group-item list-group-item-action">Source</a>
                </li>
                <li>
                <a href="/Supplier/Index" class="list-group-item list-group-item-action">Supplier</a>
                </li>
                <li>
                <a href="/UOM/Index" class="list-group-item list-group-item-action">UOM</a>

                </li>
                </ul>
                </div>


                </ul>
                </div>
                </li> *@
                    @* <li>
                @{
                activeClass = currentPath.Contains("/support") ? "active" : "";
                }
                <a href="" data-bs-toggle="collapse" data-bs-target="#support-collapse" class="@activeClass btn btn-toggle">
                <img src="~/img/icons/support.svg">
                <span class="name">Support</span>
                </a>
                <div class="collapse" id="support-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li>
                <a class="dropdown-item  nav-dropdown-item" attr-parent="support-dropdown" href="/Support/UserGuide" title="User Guide">User Guide</a>
                </li>
                <li>
                <a class="dropdown-item  nav-dropdown-item" attr-parent="support-dropdown" href="/Support/QuickGuide" title="Quick Guide">Quick Guide</a>
                </li>
                <li>
                <a class="dropdown-item nav-dropdown-item" attr-parent="support-dropdown" href="/Ticket/Index" title="Tickets">Tickets</a>
                </li>
                </ul>
                </div>
                </li> *@
                   @*  <li>
                        <div class="me-3" id="divshoppingcartlayout">
                        </div>

                    </li> *@
                    @* <li>
                <a href="" data-bs-toggle="collapse" data-bs-target="#account-collapse" class="@activeClass btn btn-toggle">
                <img src="~/img/icons/user.svg">
                <span class="name">Account</span>
                </a>
                <div class="collapse" id="account-collapse" style="">
                <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
                <li>
                <a class="dropdown-item  nav-dropdown-item" attr-parent="support-dropdown" href="/Identity/Account/Logout" title="User Guide">Logout</a>
                </li>
                <li>
                <a class="dropdown-item  nav-dropdown-item" attr-parent="support-dropdown" href="/Identity/Account/Manage/ChangePassword" title="Quick Guide">Change Password</a>
                </li>
                </ul>
                </div>
                </li> *@
                </ul>
            </div>

        }

        <div class="sidebar-footer">
            @* <div class="dropdown account-dropdown  pt-2 pr-2"> *@
                @* <ul class="nav nav-pills nav-flush flex-column mb-auto text-center nav-main-ul">
                <li class="nav-item">
                <a class="nav-link d-flex align-items-center" href="/Settings/Index">
                <img src="~/img/icons/settings.svg">
                <span class="menu-text" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Settings">Settings</span>
                </a>
                </li>
                </ul> *@

              @*   <a href="/Settings">
                    <img src="~/img/icons/settings.svg">
                    <span class="name">Settings</span>
                </a> *@

               @*  <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle pl-3"
                   id="dropdownUser4" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="~/img/icons/support.svg">
                    <span class="name">Support</span>
                </a> *@

                @* <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser4"
                    style="background-color: white;">
                    <li>
                        <a class="dropdown-item nav-dropdown-item" attr-parent="support-dropdown"
                           href="/Support/UserGuide" title="User Guide">User Guide</a>
                    </li>
                    <li>
                        <a class="dropdown-item nav-dropdown-item" attr-parent="support-dropdown"
                           href="/Support/QuickGuide" title="Quick Guide">Quick Guide</a>
                    </li>
                    <li>
                        <a class="dropdown-item nav-dropdown-item" attr-parent="support-dropdown" href="/Ticket/Index"
                           title="Tickets">Tickets</a>
                    </li>
                </ul> *@

              @*   <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle pl-3 sidebar-account"
                   id="dropdownUser2" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fa fa-user"></i>
                    <div class="d-flex flex-column">
                        <span class="ml-1 user-name menu-text">Account</span>
                        <span class="ml-1 user-name menu-text"><small>Admin</small></span>
                    </div>
                </a>
                <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser3"
                    style="background-color: white;">
                    <li class="dropdown-item">
                        <a class="nav-link d-flex align-items-center" href="/Identity/Account/Manage/ChangePassword">
                            <i class="fa fa-lock"></i>
                            <span class="menu-text">Change Password</span>
                        </a>
                    </li>

                    <li class="dropdown-item">
                        <a class="nav-link d-flex align-items-center" href="/Identity/Account/Logout">
                            <i class="fa fa-user"></i>
                            <span class="menu-text">Log Out</span>
                        </a>
                    </li>
                </ul> *@

            @* </div> *@

            <div class="collapse_toggle_wrap mt-4  pt-4">
                <button type="button" class="toggle-menu">
                    @* <svg width="16" height="16" viewBox="0 0 24 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                    d="M1.49924 15.2084V0.790039H0.188475V15.2084H1.49924ZM11.5567 14.9312L12.492 14.0288L7.11783 8.65462H23.7822V7.34386H7.14306L12.4592 1.96973L11.5567 1.06727L4.62476 7.99924L11.5567 14.9312Z"
                    fill="white"></path>
                    </svg> *@
                    @* <i class="fa fa-bars"></i> *@
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M6.0013 5.25C6.01038 3.61873 6.08272 2.7353 6.65901 2.15901C7.31802 1.5 8.37868 1.5 10.5 1.5H11.25C13.3713 1.5 14.432 1.5 15.091 2.15901C15.75 2.81802 15.75 3.87868 15.75 6V12C15.75 14.1213 15.75 15.182 15.091 15.841C14.432 16.5 13.3713 16.5 11.25 16.5H10.5C8.37868 16.5 7.31802 16.5 6.65901 15.841C6.08272 15.2647 6.01038 14.3813 6.0013 12.75" stroke="#FF0000" stroke-width="1.5" stroke-linecap="round"></path><path opacity="0.5" d="M6 14.625C4.23223 14.625 3.34835 14.625 2.79917 14.0758C2.25 13.5267 2.25 12.6428 2.25 10.875V7.125C2.25 5.35723 2.25 4.47335 2.79917 3.92417C3.34835 3.375 4.23223 3.375 6 3.375" stroke="#FF0000" stroke-width="1.5"></path><path d="M11.25 9L4.5 9M4.5 9L6 10.5M4.5 9L6 7.5" stroke="#FF0000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                    <span>Collapse</span>
                    @* <img src="~/img/collapse-dark.svg" alt="expand"> *@
                    @* <span class="text-light">Collapse sidebar</span> *@
                </button>
            </div>

            @* <div class="description">
            ©2024 Precision Material Management, LLC.<br>
            All Rights Reserved.
            </div> *@
        </div>
        @* <div class="toggle_wrap">
        <button type="button" class="toggle-menu">
        <svg width="24" height="16" viewBox="0 0 24 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.49924 15.2084V0.790039H0.188475V15.2084H1.49924ZM11.5567 14.9312L12.492 14.0288L7.11783 8.65462H23.7822V7.34386H7.14306L12.4592 1.96973L11.5567 1.06727L4.62476 7.99924L11.5567 14.9312Z" fill="white"></path>
        </svg>
        </button>
        </div> *@

        @* <div class="description">
        Copyright © @DateTime.Now.Year EZTRAK Software, LLC.<br>
        All Rights Reserved.
        </div> *@

    </div>
</div>

<script>
    $(document).ready(function () {
        $(document).on('click', '.sidebar .toggle-menu', function () {
            $('body').toggleClass('menu-collapsed');
        });
        if ($("#divshoppingcartlayout").length > 0) {
            // Load the HTML returned by the controller action
            $.get("/Cart/ShowShoppingCart", function (data) {
                // Replace the content of the shoppingCartContainer with the HTML returned by the controller action
                $("#divshoppingcartlayout").html(data);
            });
        }
        //if ($("#divequipmentcartlayout").length > 0) {
        //    // Load the HTML returned by the controller action
        //    $.get("/Cart/ShowEquipmentShoppingCart", function (data) {
        //        // Replace the content of the shoppingCartContainer with the HTML returned by the controller action
        //        $("#divequipmentcartlayout").html(data);
        //    });
        //}
    });</script>